services:
  pela-app:
    build: .
    container_name: pela_container
    
    ports:
      # NETWORK CONFIGURATION
      # Mapping container port 5000 to host port 5000.
      # To restrict access to localhost only (Security), use: "127.0.0.1:5000:5000"
      - "127.0.0.1:5000:5000"
    
    volumes:
      # DATA PERSISTENCE
      # Map local directories to container directories to prevent data loss on restart.
      
      # 1. Database & Logs: Stores 'pela.db' and raw log files
      - ./data:/app/data
      
      # 2. Reports: Stores generated HTML reports
      - ./static/reports:/app/static/reports

      # 3. SSH Keys: Mount SSH keys from host to container (Read-Only)
      - ./keys:/app/keys:ro

    environment:
      - FLASK_ENV=production
      
      # TIMEZONE SETTING
      # Default is UTC for global compatibility.
      # Users should change this to their local timezone (e.g., "Europe/Istanbul", "America/New_York")
      # for the Scheduler to run tasks at the correct local time.
      - TZ=UTC

    restart: unless-stopped